<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<title>Image-Based Mechanical Click Counter</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  :root { --bg:#000; }
  *{box-sizing:border-box;}
  body{margin:0;background:#000;display:flex;align-items:center;justify-content:center;min-height:100vh;font-family:system-ui,-apple-system,BlinkMacSystemFont,sans-serif;color:#fff;}
  .counter-wrapper{position:relative;max-width:500px;width:100%;display:inline-block;}
  .device-image{display:block;width:100%;height:auto;}
  /* overlay display window so we can animate digits */
  .display-overlay{
    position:absolute;
    /* coordinates approximate to cover the digit window from the provided image */
    left:50%;
    top:40%;
    transform:translate(-50%,-50%);
    width:230px; /* adjust if needed to align exactly */
    height:85px;
    background:#090a0f; /* match the black window */
    border-radius:5px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
    box-shadow: inset 0 4px 20px rgba(255,255,255,0.03), 0 0 16px rgba(255,255,255,0.05);
    font-family: 'Times New Roman', Georgia, serif; /* close to the reference serif number look */
    font-size:64px;
    font-weight:700;
    letter-spacing:0.12em;
    color:#d7dfe8;
    perspective:800px;
  }
  .digit-wrapper{display:flex;gap:4px;}
  .digit-slot{
    position:relative;
    width:50px;
    height:80px;
    display:flex;
    align-items:center;
    justify-content:center;
    overflow:hidden;
  }
  .digit{
    position:absolute;
    width:100%;
    height:100%;
    display:flex;
    align-items:center;
    justify-content:center;
    backface-visibility:hidden;
    transform-style:preserve-3d;
    transition:transform .35s ease, opacity .35s ease;
  }
  .digit.outgoing{transform-origin:top;animation:flipOut .35s forwards;}
  .digit.incoming{transform-origin:bottom;animation:flipIn .35s forwards;}
  @keyframes flipOut{0%{transform:rotateX(0deg);opacity:1;}100%{transform:rotateX(90deg);opacity:0;}}
  @keyframes flipIn{0%{transform:rotateX(-90deg);opacity:0;}100%{transform:rotateX(0deg);opacity:1;}}

  /* invisible hotspot overlays for + and - (can make visible for debug by removing opacity) */
  .hotspot{
    position:absolute;
    border-radius:50%;
    cursor:pointer;
    display:flex;
    align-items:center;
    justify-content:center;
    /* outline for accessibility focus */
  }
  .hotspot:focus-visible{outline:2px solid #fff;}
  .plus-area{width:80px;height:80px;top:15%;left:50%;transform:translate(-50%,-50%);}
  .minus-area{width:80px;height:80px;bottom:15%;left:50%;transform:translate(-50%,50%);}
  .feedback{position:absolute;top:0;left:0;width:100%;height:100%;pointer-events:none;}
  .btn-symbol{position:absolute;font-size:48px;font-weight:700;color:#fff;mix-blend-mode:normal;text-shadow:0 0 8px rgba(255,255,255,0.6);}
  /* small highlight on press */
  .hotspot:active .circle{transform:scale(0.92);}
</style>
</head>
<body>
  <div class="counter-wrapper" aria-label="Mechanical click counter using provided image">
    <!-- base image of the counter; if the path breaks, replace src with your uploaded image location -->
    <img class="device-image" src="click_counter_body.png" alt="Mechanical click counter body" />
    <!-- overlay for digits -->
    <div class="display-overlay" aria-label="Digit display">
      <div class="digit-wrapper" id="digitWrapper">
        <!-- digits inserted by JS -->
      </div>
    </div>
    <!-- plus hotspot over the top knob -->
    <div tabindex="0" role="button" aria-label="Increment" class="hotspot plus-area" id="plusBtn">
      <!-- optional visible symbol; comment out if you want only the image used -->
      <!-- <div class="btn-symbol">+</div> -->
    </div>
    <!-- minus hotspot over the bottom knob -->
    <div tabindex="0" role="button" aria-label="Decrement" class="hotspot minus-area" id="minusBtn">
      <!-- <div class="btn-symbol">âˆ’</div> -->
    </div>
  </div>

  <script>
    // Starting value; you can set to any number (will pad to 4 digits)
    let count = 1011;
    const DIGITS = 4;
    const wrapper = document.getElementById('digitWrapper');

    function makeDigitElement(char) {
      const d = document.createElement('div');
      d.className = 'digit';
      d.textContent = char;
      return d;
    }
    function ensureSlots() {
      if (wrapper.children.length !== DIGITS) {
        wrapper.innerHTML = '';
        for (let i = 0; i < DIGITS; i++) {
          const slot = document.createElement('div');
          slot.className = 'digit-slot';
          const initial = makeDigitElement('0');
          slot.appendChild(initial);
          wrapper.appendChild(slot);
        }
      }
    }
    function render(newCount) {
      const padded = String(newCount).padStart(DIGITS, '0');
      ensureSlots();
      Array.from(wrapper.children).forEach((slot, idx) => {
        const current = slot.querySelector('.digit');
        const targetChar = padded[idx];
        if (!current) {
          slot.innerHTML = '';
          slot.appendChild(makeDigitElement(targetChar));
          return;
        }
        if (current.textContent === targetChar) return; // no change
        const outgoing = current.cloneNode(true);
        outgoing.classList.add('outgoing');
        const incoming = makeDigitElement(targetChar);
        incoming.classList.add('incoming');
        slot.appendChild(outgoing);
        slot.appendChild(incoming);
        setTimeout(() => {
          slot.querySelectorAll('.digit').forEach(d => {
            if (!d.classList.contains('incoming')) slot.removeChild(d);
            else d.classList.remove('incoming');
          });
        }, 360);
      });
      count = newCount;
    }
    function increment() { render(count + 1); }
    function decrement() { render(Math.max(0, count - 1)); }
    document.getElementById('plusBtn').addEventListener('click', increment);
    document.getElementById('minusBtn').addEventListener('click', decrement);
    // keyboard accessibility (Enter/Space)
    document.getElementById('plusBtn').addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { increment(); e.preventDefault(); }});
    document.getElementById('minusBtn').addEventListener('keydown', e => { if (e.key === 'Enter' || e.key === ' ') { decrement(); e.preventDefault(); }});
    // initial render
    render(count);
  </script>
</body>
</html>
